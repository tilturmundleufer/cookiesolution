(()=>{const e="1.0.0",t={showOnlyInRegions:["EU","UK","CH"],geoEndpoint:null,euCountryCodes:["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","IS","LI","NO"],ukCodes:["GB"],chCodes:["CH"],categories:["essential","analytics","functional","marketing"],cookie:{name:"cs_consent",days:365,domain:function(e){try{const t=e.split(".");if(t.length<=2)return e;const n=["co.uk","ac.uk","gov.uk","com.au","com.br"],o=t.slice(-2).join("."),a=t.slice(-3).join(".");return n.includes(o)?a:o}catch(t){return e}}(window.location.hostname),sameSite:"Lax",secure:!0},storageKey:"cs_consent_log",webhookUrl:null,consentLogRetentionDays:1095,i18n:{de:{banner_title:"Cookies & Datenschutz",banner_desc:"Wir verwenden Cookies, um unsere Website zu betreiben und zu verbessern. Sie können Ihre Auswahl anpassen.",banner_prefs:"Einstellungen",btn_accept:"Alle akzeptieren",btn_reject:"Nur Essenzielle",btn_save:"Auswahl speichern",prefs_title:"Cookie-Einstellungen",prefs_intro:"Wählen Sie aus, welche Kategorien wir verwenden dürfen. Essenzielle Cookies sind immer aktiv.",cat_essential:"Essenziell",cat_essential_desc:"Erforderlich für die Grundfunktionen der Website.",cat_analytics:"Analytics",cat_analytics_desc:"Hilft uns, die Leistung zu messen (z. B. GA4, Hotjar).",cat_functional:"Funktional",cat_functional_desc:"Komfortfunktionen & eingebettete Medien (z. B. YouTube, Karten).",cat_marketing:"Marketing",cat_marketing_desc:"Personalisierte Werbung & Tracking durch Dritte.",manage_label:"Cookie-Einstellungen",embed_blocked:"Dieses eingebettete Medium ist blockiert, bis Sie <em>Funktional</em> erlauben.",enable_functional:"Funktionale Cookies erlauben"},en:{banner_title:"Cookies & Privacy",banner_desc:"We use cookies to operate and improve our site. You can adjust your choices.",banner_prefs:"Preferences",btn_accept:"Accept all",btn_reject:"Essentials only",btn_save:"Save selection",prefs_title:"Cookie settings",prefs_intro:"Choose which categories we may use. Essential cookies are always on.",cat_essential:"Essential",cat_essential_desc:"Required for basic site functionality.",cat_analytics:"Analytics",cat_analytics_desc:"Helps us measure performance (e.g. GA4, Hotjar).",cat_functional:"Functional",cat_functional_desc:"Convenience & embedded media (e.g. YouTube, maps).",cat_marketing:"Marketing",cat_marketing_desc:"Personalised advertising & third‑party tracking.",manage_label:"Cookie settings",embed_blocked:"This embedded media is blocked until you allow <em>Functional</em>.",enable_functional:"Allow functional cookies"}}};function n(e,t=document){return t.querySelector(e)}function o(e,t=document){return Array.from(t.querySelectorAll(e))}function a(n,o){const a=function(){const e=document.currentScript||document.querySelector('script[src*="cookie-solution"]');return e?.getAttribute("data-cs-webhook")||t.webhookUrl||null}();if(!a)return;const i={ts:n.ts||Date.now(),action:o,consent:{essential:n.essential,analytics:n.analytics,functional:n.functional,marketing:n.marketing},version:e,region:n.region||"unknown",domain:window.location.hostname};fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),keepalive:!0}).catch(e=>{"undefined"!=typeof console&&console.warn&&console.warn("Cookie consent webhook error:",e)})}function i(){const e=t.i18n[function(){const e=document.documentElement.lang||"",t=navigator.language||"";return/^de/i.test(e||t)?"de":"en"}()];o("[data-i18n]").forEach(t=>{const n=t.getAttribute("data-i18n");e[n]&&(t.innerHTML=e[n])})}const c={version:e,essential:!0,analytics:!1,functional:!1,marketing:!1,ts:Date.now(),region:"unknown"};function s(){try{return JSON.parse((e=t.cookie.name,document.cookie.split("; ").reduce((t,n)=>{const[o,...a]=n.split("=");return o===e&&(t=decodeURIComponent(a.join("="))),t},"")))||null}catch(e){return null}var e}function r(e,n){const o=JSON.stringify(e);!function(e,t,n,o,a=!0,i="Lax"){const c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3);const s=[`${e}=${encodeURIComponent(t)}`,`expires=${c.toUTCString()}`,"path=/",o?`domain=.${o}`:"",a?"Secure":"",`SameSite=${i}`].filter(Boolean);document.cookie=s.join("; ")}(t.cookie.name,o,t.cookie.days,t.cookie.domain,t.cookie.secure,t.cookie.sameSite);try{const o=JSON.parse(localStorage.getItem(t.storageKey)||"[]");o.push({ts:Date.now(),action:n||"unknown",state:e});const a=Date.now()-24*t.consentLogRetentionDays*60*60*1e3,i=o.filter(e=>e.ts>=a);localStorage.setItem(t.storageKey,JSON.stringify(i))}catch(e){}n&&a(e,n)}function l(){dataLayer.push(arguments)}function d(e){const t=!0===navigator.globalPrivacyControl,n=e.analytics&&!t,o=e.marketing&&!t;l("consent","update",{ad_storage:o?"granted":"denied",ad_user_data:o?"granted":"denied",ad_personalization:o?"granted":"denied",analytics_storage:n?"granted":"denied",functionality_storage:e.functional?"granted":"denied",security_storage:"granted"})}function u(e){t.categories.forEach(t=>{"essential"!==t&&e[t]&&(o(`script[type="text/plain"][data-category="${t}"]`).forEach(e=>{const t=document.createElement("script");for(const{name:n,value:o}of Array.from(e.attributes))"type"!==n&&"data-category"!==n&&t.setAttribute(n,o);e.src?t.src=e.src:t.text=e.text||e.innerHTML,e.parentNode.replaceChild(t,e)}),o(`iframe[data-category="${t}"][data-blocked="true"]`).forEach(e=>{const t=e.getAttribute("data-src");t&&(e.setAttribute("src",t),e.removeAttribute("data-blocked"));const n=e.closest(".cs-embed-wrapper");if(n){const e=n.querySelector(".cs-embed-placeholder");e&&e.remove()}}))})}function f(){t.categories.forEach(e=>{"essential"!==e&&o(`iframe[data-category="${e}"]:not([data-prepared="1"])`).forEach(t=>{t.setAttribute("data-prepared","1");const n=k()[e],o=t.getAttribute("src");if(!n&&o){t.setAttribute("data-src",o),t.setAttribute("data-blocked","true"),t.removeAttribute("src");const e=document.createElement("div");e.className="cs-embed-wrapper",t.parentNode.insertBefore(e,t),e.appendChild(t);const n=document.getElementById("cs-embed-placeholder-template");if(n){const t=n.content.cloneNode(!0);e.appendChild(t)}}})})}function m(){n("#cs-prefs").hidden=!1,_(k()),function(e){const t=n(e);if(!t)return;y=document.activeElement;const o=t.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),a=o[0],i=o[o.length-1];t.addEventListener("keydown",function(e){"Tab"===e.key&&(e.shiftKey&&document.activeElement===a?(e.preventDefault(),i.focus()):e.shiftKey||document.activeElement!==i||(e.preventDefault(),a.focus())),"Escape"===e.key&&g()}),setTimeout(()=>{a&&a.focus()},0)}("#cs-prefs")}function g(){n("#cs-prefs").hidden=!0,y&&y.focus()}function p(){const e=n("#cs-manage");e&&(e.hidden=!1)}window.dataLayer=window.dataLayer||[],l("consent","default",{ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied",analytics_storage:"denied",functionality_storage:"denied",security_storage:"granted"});let y=null;let b=null;function k(){return b||c}function _(e){document.querySelectorAll("[data-cs-cat]").forEach(t=>{const n=t.getAttribute("data-cs-cat");"essential"!==n&&(t.checked=!!e[n])})}function h(e,o){const a=k(),i=t.categories.some(t=>"essential"!==t&&(!0===a[t]&&!1===e[t]));b=e,r(e,o),d(e),u(e),f(),_(e),n("#cs-banner").hidden=!0,g(),p(),i&&window.location.reload()}var w;w=async()=>{i(),document.body.addEventListener("click",e=>{const n=e.target.closest("[data-cs]");if(!n)return;const o=n.getAttribute("data-cs");if("open-prefs"===o&&m(),"close"===o&&g(),"accept"===o&&h({...c,analytics:!0,functional:!0,marketing:!0,ts:Date.now()},"accept_all"),"reject"===o&&h({...c,analytics:!1,functional:!1,marketing:!1,ts:Date.now()},"reject_all"),"save-selection"===o){const e=k(),n={...c,region:e.region,ts:Date.now()};t.categories.forEach(e=>{if("essential"===e)return;const t=document.querySelector(`[data-cs-cat="${e}"]`);n[e]=!!t&&!!t.checked}),h(n,"save_selection")}"enable-functional"===o&&h({...k(),functional:!0,ts:Date.now()},"save_selection")});const e=s();if(e)return b={...c,...e},d(b),u(b),f(),void p();await async function(){if(!t.geoEndpoint)return!0;try{const e=await fetch(t.geoEndpoint,{credentials:"omit"}),n=await e.json(),o=(n.country_code||n.country||"").toUpperCase();return!!t.euCountryCodes.includes(o)||!!t.ukCodes.includes(o)||!!t.chCodes.includes(o)}catch(e){return!0}}()&&(n("#cs-banner").hidden=!1),f()},"loading"!==document.readyState?w():document.addEventListener("DOMContentLoaded",w)})();